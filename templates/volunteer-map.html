{% extends "base.html" %}
{% load static %}
{% load compress %}

{% block page_title %}School Map: Volunteer{% endblock %}
{% block endbody %}
    {% compress js %}
    <script type="text/javascript" src="{% static 'js/lib/jquery.slimscroll.min.js' %}"></script>
	<script type="text/javascript" src="{% static 'js/lib/zebra_datepicker.js' %}"></script>
	<script type="text/javascript" src="{% static 'js/lib/jquery.easydropdown.min.js' %}"></script>
 	<script type="text/javascript" src="{% static 'js/lib/leaflet-0.7.3/leaflet.js' %}"></script>
 	<script type="text/javascript" src="{% static 'js/common/volunteer_here.js' %}"></script>
 	<script type="text/javascript" src="{% static 'js/volunteer_map/init.js' %}"></script>
 	<script type="text/javascript" src="{% static 'js/volunteer_map/volunteer_map.js' %}"></script>
	<script type="text/javascript" src="{% static 'js/volunteer_map/volunteer_date_modal.js' %}"></script>
	<script type="text/javascript" src="{% static 'js/lib/moment.js' %}"></script>
    {% endcompress %}

    <!-- <script type="text/javascript" src="js/map.js"></script> -->
    <link rel="stylesheet" href="{% static 'js/lib/leaflet-0.7.3/leaflet.css' %}" />

   <style type="text/css">
		@media only screen and (min-width: 769px) {
			.main-header {
				position: fixed;
			}
		}
   </style>

{% endblock %}

{% block subheader %}
	<div class="map-subheader-wrapper volunteer-map-subheader-wrapper show-volunteer-filters">
		<div class="subheader-content">
			<input type="text" name="search" placeholder="Search for a location" class="search-input fl"/>
			<a class="button no-mar filled-shadow clickable grey mt-10 mr-10 fr hide phn-block js-toggle-vol-mobile-filters">Filters</a>
			<div class="phn-clr"></div>

			<div class="volunteer-filters-wrapper fl">
				<!-- <div class="label fl">Location</div>
				<div class="filter-item fl phn-fr">
					<select name="location" class="dropdown">
						<option>Banaswadi</option>
						<option>Malleswaram</option>
						<option>Banaswadi</option>
						<option>Malleswaram</option>
					</select>
				</div> -->
				<div class="hide phn-block phn-clr"></div>

				<div class="label fl">Date</div>
				<div class="filter-item fl phn-fr">
					<span class="js-volunter-date-input-wrapper">
						<input type="text" name="date" readonly="readonly" value="15-07-2014" class="input date-input" id="vol-date-input">
					</span>

					<div class="calendar-wrapper js-volunteer-cal">
						<div class="cal">
		    				<!-- <input class="js-datepicker-input" id="datepicker-input" type="hidden" readonly="readonly"> -->
		    				<div id="vol-datepicker-wrapper"></div>
		    			</div>
					</div>

					<script type="text/javascript">
						// function init_volunteer_date_filter(){
						// 	var $date_input = $("#vol-date-input");
						// 	var $calender_wrapper = $('.js-volunteer-cal');
						// 	var $datepicker_wrapper = $calender_wrapper.find("#vol-datepicker-wrapper");

						// 	$date_input.Zebra_DatePicker({
						// 	    always_visible: $datepicker_wrapper,
						// 	    format: 'd-m-Y',
						// 	    first_day_of_week: 0,
						// 	    show_clear_date: false,
						// 	    show_select_today: false,
						// 	    disabled_dates: ['1,3,4,5,12,13,14,22,24'],
						// 	    onSelect: onDateSelect,
						// 	    onClear: onDateClear
						// 	});
						// 	// var datepicker = $datepicker_input.data('Zebra_DatePicker');

						// 	function onDateSelect(date){
						// 		$date_input.val(date);
						// 		$calender_wrapper.removeClass("show");
						// 		// $btn_next_step_cal.show();
						// 	}
						// 	function onDateClear(){
						// 		// $date_input.val("");
						// 		// $btn_next_step_cal.hide();
						// 	}

						// 	$(document).on("click", ".js-volunter-date-input-wrapper", function(){
						// 		$(".js-volunteer-cal").toggleClass("show");
						// 	});
						// }

						// $(document).ready(function(){
						// 	init_volunteer_date_filter();
						// });

					</script>
				</div>
				<div class="hide phn-block phn-clr"></div>

				<div class="label fl">Organization</div>
				<div class="filter-item fl phn-fr">
					<select name="organization" id="filterOrganization" class="dropdown">
						<option value="" selected>All</option>
						{% for org in organizations %}
						<option value="{{ org.id }}">{{ org.name }}</option>
						{% endfor %}
					</select>
				</div>
				<div class="hide phn-block phn-clr"></div>

				<div class="label fl">Opportunity</div>
				<div class="filter-item fl phn-fr">
					<select name="activity" id="filterActivityType" class="dropdown">
						<option value="" selected>All</option>
						{% for typ in activity_types %}
						<option value="{{ typ.id }}">{{ typ.name }}</option>
						{% endfor %}
					</select>
				</div>
				<div class="clr"></div>
			</div>

			<div class="clr"></div>
		</div>
	</div>


{% endblock %}

{% block content %}

	<script type="text/javascript">
		// $(function(){
		//     $('.option_item .item_values ul').slimScroll({
		//         height: '200px',
		//         size: '6px',
		//         color: '#8d8d8d',
		//         railVisible: true,
  //     			railColor: '#f6f6f6',
  //     			railOpacity: 1
		//     });
		// });

		// function option_value_list_toggle(obj){
		// 	var state_open = false;
		// 	if($(obj).parent().find('.item_values').hasClass('open')){
		// 		state_open = true;
		// 	}
		// 	$('.item_values').removeClass('open');
		// 	if(state_open){
		// 		$(obj).parent().find('.item_values').removeClass('open');
		// 	} else {
		// 		$(obj).parent().find('.item_values').addClass('open');
		// 	}
		// 	//$(obj).parent().find('.item_values').toggleClass('open');
		// 	event.stopPropagation();
		// }

		// $('html').click(function() {
		// 	//Hide the menus if visible
		// 	$('.item_values').removeClass('open');
		// });


	</script>

	<div class="map_page page-volunteer-map">
		<section class="map_canvas_full">
			<div id="map_canvas"></div>
		</section>

		<section id="sidebar_wrapper" class="sidebar-wrapper">
			<ul id="volunteerActivityList">
			</ul>
		</section>

		<section id="map_overlay" class="map_overlay hide">
			<a href="" class="button-close js-close-info" title="Close"><span></span></a>
			<div class="content"></div>
		</section>

		<div id="modal_overlay" class="modal-overlay show"></div>
		<div id="modal_wrapper">
				<div id="modal_volunteer_flow" class="modal volunteer-flow modal-volunteer volunteerDateModal">
			    	<a href="" class="button-close fr btn-modal-close"></a>
			    	<div class="content">
			    		<h2 class="modal-heading">Volunteer</h2>
			    		<div class="steps-wrapper">
					    	<div class="step-item fadein visible" data-step="1">
					    		<div class="step-date">
					    			<h3 class="bordered-heading blue">Select Date<span></span></h3>
					    			<!--
					    			<div class="input-wrapper">
					    				<input type="text" class="input-text width-100p" placeholder="Whitefield, Bangalore">
					    				<a href="" class="icon-location"></a>
					    			</div>
					    			-->
					    			<div class="cal">
					    				<input id="datepicker-modal-input" type="hidden" readonly="readonly">
					    				<div id="datepicker-modal-wrapper"></div>
					    			</div>
					    		</div> 
					    	</div> <!-- Step End -->
						</div>
					</div>
				</div>
		</div>

	{% include 'frontend_templates/volunteer_map.html' %}
	{% include 'frontend_templates/volunteer_here.html' %}
{% endblock %}
